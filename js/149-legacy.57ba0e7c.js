(self["webpackChunkvendedores"]=self["webpackChunkvendedores"]||[]).push([[149],{4048:function(t,e,i){var n=i(2109);n({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},5424:function(t,e,i){"use strict";i.d(e,{Z:function(){return g}});var n=i(5200),r=i(4367),s=(i(1539),i(7327),i(3325)),a=i(5827),o=i(172),l=i(6952),c=i(7352),u=i(8085),h=i(2936),p=i(6505),d=i(9131),v=i(1824),g=(0,s.Z)(l.Z,d.Z,p.Z,u.Z,(0,c.d)("chipGroup"),(0,h.d)("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default:function(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:function(){return{proxyClass:"v-chip--active"}},computed:{classes:function(){return(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({"v-chip":!0},p.Z.options.computed.classes.call(this)),{},{"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose},this.themeClasses),this.sizeableClasses),this.groupClasses)},hasClose:function(){return Boolean(this.close)},isClickable:function(){return Boolean(p.Z.options.computed.isClickable.call(this)||this.chipGroup)}},created:function(){var t=this,e=[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]];e.forEach((function(e){var i=(0,n.Z)(e,2),r=i[0],s=i[1];t.$attrs.hasOwnProperty(r)&&(0,v.fK)(r,s,t)}))},methods:{click:function(t){this.$emit("click",t),this.chipGroup&&this.toggle()},genFilter:function(){var t=[];return this.isActive&&t.push(this.$createElement(o.Z,{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(a.Zq,t)},genClose:function(){var t=this;return this.$createElement(o.Z,{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.$emit("click:close"),t.$emit("update:active",!1)}}},this.closeIcon)},genContent:function(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render:function(t){var e=[this.genContent()],i=this.generateRouteLink(),n=i.tag,s=i.data;s.attrs=(0,r.Z)((0,r.Z)({},s.attrs),{},{draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:s.attrs.tabindex}),s.directives.push({name:"show",value:this.active}),s=this.setBackgroundColor(this.color,s);var a=this.textColor||this.outlined&&this.color;return t(n,this.setTextColor(a,s),e)}})},549:function(t,e,i){"use strict";function n(t,e,i){var n=e.value,r=e.options||{passive:!0};window.addEventListener("resize",n,r),t._onResize=Object(t._onResize),t._onResize[i.context._uid]={callback:n,options:r},e.modifiers&&e.modifiers.quiet||n()}function r(t,e,i){var n;if(null!=(n=t._onResize)&&n[i.context._uid]){var r=t._onResize[i.context._uid],s=r.callback,a=r.options;window.removeEventListener("resize",s,a),delete t._onResize[i.context._uid]}}var s={inserted:n,unbind:r};e["Z"]=s},9617:function(t,e,i){"use strict";i.d(e,{Z:function(){return a}});var n=i(8083),r=i(1824),s=i(144);function a(t){return s.Z.extend({name:"intersectable",data:function(){return{isIntersecting:!1}},mounted:function(){n.Z.inserted(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},destroyed:function(){n.Z.unbind(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},methods:{onObserve:function(e,i,n){if(this.isIntersecting=n,n)for(var s=0,a=t.onVisible.length;s<a;s++){var o=this[t.onVisible[s]];"function"!==typeof o?(0,r.Kd)(t.onVisible[s]+" method is not available on the instance but referenced in intersectable mixin options"):o()}}}})}},6640:function(t,e,i){"use strict";i.d(e,{yo:function(){return o},if:function(){return c}});var n=i(6198),r=(i(5666),i(1618)),s=i(5321),a=i(7376);function o(t){return l.apply(this,arguments)}function l(){return l=(0,n.Z)(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=(0,s.JU)(r.ZP,"/users",""+a.Z.state.common.currentUser.id),t.next=3,(0,s.r7)(i,{raceUser:e});case 3:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function c(t,e){return u.apply(this,arguments)}function u(){return u=(0,n.Z)(regeneratorRuntime.mark((function t(e,i){var n,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log({selectionIndex:e,pict:i}),n=a.Z.state.common.currentUser.id,o=(0,s.JU)(r.ZP,"/users",""+a.Z.state.common.currentUser.raceUser),l=a.Z.state.seller.currentRace,l[e].pictures||(l[e].pictures={}),l[e].pictLinks||(l[e].pictLinks={}),l[e].pictures[n]=i,l[e].pictLinks[i.original]=i,console.log({newRaceInfo:l}),t.next=11,(0,s.r7)(o,{race:l});case 11:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}},8149:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return G}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[t.loading?t._e():i("v-row",{staticClass:"word-bar",attrs:{align:"center",justify:"center"}},[i("v-chip",{staticStyle:{"font-size":"large"},attrs:{color:"primary"}},[t._v(t._s(t.selection?t.selection.word:"..."))])],1),i("v-container",{staticStyle:{"padding-top":"15px"}},[t.loading||t.loadingctrl?i("loading"):t.selection.selected?i("v-container",[i("v-img",{staticClass:"my-3",attrs:{contain:"",src:t.selection.selected.original,"max-height":"400px"}}),t._v(" "+t._s(t.selection.selected.title)+" "),i("br"),i("div",{staticStyle:{color:"green"}},[t._v(" From seller: "+t._s(t.selection.selected.user)+" ")])],1):t.thumbnailView?i("v-container",[i("v-row",{attrs:{"align-content":"center",justify:"center"}},t._l(t.renderedThumbnails,(function(e,n){return i("v-col",{key:n,staticClass:"pict-card"},[i("tooltip",{attrs:{text:e.title}},[i("v-img",{staticClass:"my-3 thumbnail",attrs:{contain:"",src:e.thumbnail,"max-height":"200px",transition:"fade"},on:{click:function(){return t.showCarousel(20*(t.page-1)+n)}},scopedSlots:t._u([{key:"placeholder",fn:function(){return[i("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[i("v-progress-circular",{attrs:{indeterminate:"",color:"primary lighten-5"}})],1)]},proxy:!0}],null,!0)})],1)],1)})),1),i("v-row",{staticClass:"pagination-bar",attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"8"}},[i("v-container",{staticClass:"max-width"},[i("v-pagination",{staticClass:"my-4",attrs:{length:t.totalPages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1)],1):i("div",{staticClass:"carousel-container"},[i("v-carousel",{attrs:{"hide-delimiters":"","show-arrows-on-hover":"","hide-delimiter-background":""},model:{value:t.carousel,callback:function(e){t.carousel=e},expression:"carousel"}},t._l(t.pictures,(function(e,n){return i("div",{key:n,attrs:{text:e.title}},[i("v-carousel-item",[i("v-sheet",{staticClass:"transparent-sheet",attrs:{height:"100%"}},[i("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[i("v-img",{attrs:{contain:"",src:e.original,height:"100%"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[i("v-img",{attrs:{contain:"",src:e.thumbnail,height:"100%"}})]},proxy:!0}],null,!0)})],1)],1)],1)],1)})),0),i("v-row",{staticClass:"actions-row"},[i("tooltip",{attrs:{text:"Select current image"}},[i("v-btn",{staticClass:"action-btn",attrs:{fab:"",small:"",color:"primary",disabled:t.selectDisabled},on:{click:function(){return t.select(t.carousel)}}},[i("v-icon",[t._v(" mdi-check ")])],1)],1),i("tooltip",{attrs:{text:"Close preview"}},[i("v-btn",{staticClass:"action-btn",attrs:{fab:"",small:"",color:"primary"},on:{click:function(e){t.thumbnailView=!0}}},[i("v-icon",[t._v(" mdi-close ")])],1)],1)],1)],1)],1)],1)},r=[],s=i(6198),a=i(4367),o=(i(5666),i(7042),i(4048),i(9653),i(1249),i(4553),i(920)),l=i(629),c=i(5418),u=i(6640),h=(i(2222),i(1703),i(1485)),p=i(9669),d=i.n(p),v=h.Z+"/search.json";function g(t){return f.apply(this,arguments)}function f(){return f=(0,s.Z)(regeneratorRuntime.mark((function t(e){var i,n,r,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=s.length>1&&void 0!==s[1]?s[1]:0,t.next=3,d().get("".concat(v,"?q=").concat(e,"&ijn=").concat(i));case 3:if(n=t.sent,!n.data.error){t.next=6;break}throw new Error(n.data.error);case 6:if(r=n.data.search_information&&"Fully empty"===n.data.search_information.image_results_state,!r){t.next=9;break}return t.abrupt("return",[]);case 9:return t.abrupt("return",n.data.images_results);case 10:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}var m={components:{Loading:o.Z,Tooltip:c.Z},data:function(){return{selection:null,selected:-1,thumbnailView:!0,carousel:0,confirmDialog:!1,id:-1,page:1,pictures:[],loadingctrl:!1}},computed:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,l.rn)("seller",["currentRace"])),(0,l.rn)("common",["currentUser"])),{},{loading:function(){return!Boolean(this.currentRace)},renderedThumbnails:function(){return this.pictures.slice(20*(this.page-1),Math.min(20*this.page,this.pictures.length))},totalPages:function(){return this.pictures.length/20},selectDisabled:function(){return Boolean(this.selection&&this.selection.pictLinks&&this.pictures&&this.selection.pictLinks[this.pictures[this.carousel].original])}}),watch:{loading:{immediate:!0,handler:function(t){if(!t){var e=+this.$router.currentRoute.params.idx-1;console.log({id:e}),(Number.isNaN(e)||e>=this.currentRace.length||e<0)&&(this.$toast.error("No se encuentra la ruta solicitada"),this.$router.push("/404")),this.id=e,this.selection=this.currentRace[e],this.selection.selected||this.fetchImages()}}},thumbnailView:function(t){t&&(this.page=Math.floor(this.carousel/20+1))}},methods:{fetchImages:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingctrl=!0,e.prev=1,e.next=4,g(t.selection.word);case 4:t.pictures=e.sent.map((function(t){return(0,a.Z)((0,a.Z)({},t),{},{lazy:!1})})),t.loadingctrl=!1,i=t.selection.pictures[t.currentUser.id],i&&(t.carousel=t.pictures.findIndex((function(t){return t.original===i.original})),t.carousel>0&&(t.thumbnailView=!1)),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$toast.error(e.t0.message);case 13:return e.prev=13,e.finish(13);case 15:case"end":return e.stop()}}),e,null,[[1,10,13,15]])})))()},toggleSelected:function(t){this.selected===t?this.selected=null:this.selected=t},showCarousel:function(t){this.thumbnailView=!1,this.carousel=t},select:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,u["if"])(e.id,e.pictures[t]);case 3:e.$toast.success("Image successfully selected"),e.$router.push("/seller"),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](0),e.$toast.error(i.t0.message);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()}}},b=m,y=i(1001),Z=i(3453),x=i.n(Z),w=i(3150),C=i(7426),k=i(4062),$=i(5424),_=i(2102),I=i(9846),L=i(6428),R=i(7047),V=i(8932),S=(i(1539),i(9714),i(172)),B=i(549),z=i(6952),N=i(9617),A=i(8085),E=i(3325),P=(0,E.Z)(z.Z,(0,N.Z)({onVisible:["init"]}),A.Z).extend({name:"v-pagination",directives:{Resize:B.Z},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(t){return t%1===0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return(0,a.Z)({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var t=parseInt(this.totalVisible,10);if(0===t)return[];var e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);var i=e%2===0?1:0,n=Math.floor(e/2),r=this.length-n+1+i;if(this.value>n&&this.value<r){var s=1,a=this.length,o=this.value-n+2,l=this.value+n-2-i,c=o-1===s+1?2:"...",u=l+1===a-1?l+1:"...";return[1,c].concat((0,V.Z)(this.range(o,l)),[u,this.length])}if(this.value===n){var h=this.value+n-1-i;return[].concat((0,V.Z)(this.range(1,h)),["...",this.length])}if(this.value===r){var p=this.value-n+1;return[1,"..."].concat((0,V.Z)(this.range(p,this.length)))}return[].concat((0,V.Z)(this.range(1,n)),["..."],(0,V.Z)(this.range(r,this.length)))}},watch:{value:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.selected=null,this.$nextTick(this.onResize),setTimeout((function(){return t.selected=t.value}),100)},onResize:function(){var t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next:function(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(t,e){var i=[];t=t>0?t:1;for(var n=t;n<=e;n++)i.push(n);return i},genIcon:function(t,e,i,n,r){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":i},attrs:{disabled:i,type:"button","aria-label":r},on:i?{}:{click:n}},[t(S.Z,[e])])])},genItem:function(t,e){var i=this,n=e===this.value&&(this.color||"primary"),r=e===this.value,s=r?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(n,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":r,"aria-label":this.$vuetify.lang.t(s,e)},on:{click:function(){return i.$emit("input",e)}}}),[e.toString()])},genItems:function(t){var e=this;return this.items.map((function(i,n){return t("li",{key:n},[isNaN(Number(i))?t("span",{class:"v-pagination__more"},[i.toString()]):e.genItem(t,i)])}))},genList:function(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render:function(t){var e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}}),U=i(624),j=i(2877),M=i(3385),D=(0,y.Z)(b,n,r,!1,null,null,null),G=D.exports;x()(D,{VBtn:w.Z,VCarousel:C.Z,VCarouselItem:k.Z,VChip:$.Z,VCol:_.Z,VContainer:I.Z,VIcon:L.Z,VImg:R.Z,VPagination:P,VProgressCircular:U.Z,VRow:j.Z,VSheet:M.Z})}}]);
//# sourceMappingURL=149-legacy.57ba0e7c.js.map