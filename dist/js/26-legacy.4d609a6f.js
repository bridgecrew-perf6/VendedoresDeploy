"use strict";(self["webpackChunkvendedores"]=self["webpackChunkvendedores"]||[]).push([[26],{6640:function(e,t,r){r.d(t,{yo:function(){return c},if:function(){return l}});var n=r(4367),s=r(6198),a=(r(1703),r(5666),r(1618)),o=r(5321),i=r(7376);function c(e){return u.apply(this,arguments)}function u(){return u=(0,s.Z)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=(0,o.JU)(a.ZP,"/users",""+i.Z.state.common.currentUser.id),e.next=3,(0,o.r7)(r,{raceUser:t});case 3:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(e,t){return d.apply(this,arguments)}function d(){return d=(0,s.Z)(regeneratorRuntime.mark((function e(t,r){var s,c,u,l,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log({selectionIndex:t,pict:r}),s=i.Z.state.common.currentUser.id,c=(0,o.JU)(a.ZP,"/users",""+i.Z.state.common.currentUser.raceUser),u=i.Z.state.seller.currentRace,u[t].pictures||(u[t].pictures={}),u[t].pictLinks||(u[t].pictLinks={}),!u[t].pictLinks[r.original]){e.next=8;break}throw new Error("Alreaady taken");case 8:return l=1,d=u[t].pictures[s],d&&(delete u[t].pictLinks[d.original],l=0),u[t].pictures[s]=r,u[t].pictLinks[r.original]=r,console.log({newRaceInfo:u}),p=i.Z.state.seller.currentRaceUserInfo,p.sellers||(p.sellers={}),p.sellers[i.Z.state.common.currentUser.id]?p.sellers[i.Z.state.common.currentUser.id].proposals+=l:p.sellers[i.Z.state.common.currentUser.id]={proposals:l,score:0},e.next=19,(0,o.r7)(c,(0,n.Z)((0,n.Z)({},p),{},{race:u}));case 19:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},78:function(e,t,r){r.r(t),r.d(t,{default:function(){return U}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{dark:!1,value:!0}},[r("v-data-table",{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{title:"Select a race to engage with",headers:e.headers,items:e.users2render,loading:e.loading,"fixed-header":"",dense:"","single-select":""},on:{"click:row":e.engage}},[r("template",{slot:"top"},[r("v-toolbar-title",{staticStyle:{padding:"20px","text-align":"center"}},[e._v(" Select a race to engage with ")])],1)],2)],1)},s=[],a=r(6198),o=r(4367),i=(r(5666),r(1249),r(7327),r(1539),r(9720),r(8309),r(4916),r(5306),r(1618)),c=r(5321),u=r(6640),l=r(629),d={data:function(){return{loading:!0,users:[],snapshootUnsubscribe:null,headers:[{text:"User name",value:"name"},{text:"Sellers engaged",value:"sellers",align:"start"},{text:"Ongoing quiz ",value:"ongoingQuiz",align:"start"},{text:"Total quiz ",value:"race.length",align:"start"}]}},created:function(){var e=this;this.snapshootRef=(0,c.cf)((0,c.hJ)(i.ZP,"users"),(function(t){e.loading=!1,t.docChanges().map((function(t){var r=(0,o.Z)((0,o.Z)({},t.doc.data()),{},{name:t.doc.id});"added"===t.type&&(console.log("added",r),e.users.push(r)),"modified"===t.type&&console.log("modified",r),"deleted"===t.type&&console.log("deleted",t.doc.data())}))}))},beforeDestroy:function(){"function"===typeof this.snapshootUnsubscribe&&this.snapshootUnsubscribe()},computed:{users2render:function(){return this.users.filter((function(e){return"user"===e.type&&Array.isArray(e.race)})).map((function(e){var t=e.race.filter((function(e){return!e.selected})).length;return(0,o.Z)((0,o.Z)({},e),{},{sellers:e.sellers&&Object.entries(e.sellers).length,ongoingQuiz:t})}))}},methods:(0,o.Z)((0,o.Z)({},(0,l.nv)("common",["updateCurrentUser"])),{},{engage:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,u.yo)(e.name);case 2:t.updateCurrentUser({raceUser:e.name});try{"function"===typeof t.snapshootUnsubscribe&&t.snapshootUnsubscribe(),t.$toast.success("You are engaged to ".concat(e.name,"'s race now")),window.location.replace("/seller")}catch(n){t.$toast.error(n.message)}case 4:case"end":return r.stop()}}),r)})))()}})},p=d,g=r(1001),f=r(3453),h=r.n(f),m=r(9846),v=r(6310),Z=r(7921),w=(0,g.Z)(p,n,s,!1,null,null,null),U=w.exports;h()(w,{VContainer:m.Z,VDataTable:v.Z,VToolbarTitle:Z.qW})}}]);
//# sourceMappingURL=26-legacy.4d609a6f.js.map