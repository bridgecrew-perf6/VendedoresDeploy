"use strict";(self["webpackChunkvendedores"]=self["webpackChunkvendedores"]||[]).push([[29],{3099:function(t,e,r){r.d(e,{Z:function(){return f}});var n=r(3274),i=r(4367),s=(r(9653),r(6428)),a=r(6952),o=r(8085),c=r(2936),l=r(6591),u=r(3536),d=r(3325),h=r(4589),p=["aria-atomic","aria-label","aria-live","role","title"],f=(0,d.Z)(a.Z,(0,u.d)(["left","bottom"]),o.Z,c.Z,l.Z).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes:function(){return(0,i.Z)({"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile},this.themeClasses)},computedBottom:function(){return this.bottom?"auto":this.computedYOffset},computedLeft:function(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight:function(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop:function(){return this.bottom?this.computedYOffset:"auto"},computedXOffset:function(){return this.calcPosition(this.offsetX)},computedYOffset:function(){return this.calcPosition(this.offsetY)},isRtl:function(){return this.$vuetify.rtl},offset:function(){return this.overlap?this.dot?8:12:this.dot?2:4},styles:function(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition:function(t){return"calc(100% - ".concat((0,h.kb)(t||this.offset),")")},genBadge:function(){var t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),r=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),n=this.$createElement("span",r,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[n]):n},genBadgeContent:function(){if(!this.dot){var t=(0,h.z9)(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(s.Z,this.icon):void 0)}},genBadgeWrapper:function(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render:function(t){var e=[this.genBadgeWrapper()],r=[(0,h.z9)(this)],i=this.$attrs,s=(i["aria-atomic"],i["aria-label"],i["aria-live"],i.role,i.title,(0,n.Z)(i,p));return this.inline&&this.left?r.unshift(e):r.push(e),t("span",{staticClass:"v-badge",attrs:s,class:this.classes},r)}})},3237:function(t,e,r){r.d(e,{Z:function(){return c}});var n=r(4367),i=(r(9653),r(4944),r(3792),r(5648)),s=r(4981),a=r(6505),o=r(3325),c=(0,o.Z)(s.Z,a.Z,i.Z).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes:function(){return(0,n.Z)((0,n.Z)({"v-card":!0},a.Z.options.computed.classes.call(this)),{},{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised},i.Z.options.computed.classes.call(this))},styles:function(){var t=(0,n.Z)({},i.Z.options.computed.styles.call(this));return this.img&&(t.background='url("'.concat(this.img,'") center center / cover no-repeat')),t}},methods:{genProgress:function(){var t=s.Z.options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render:function(t){var e=this.generateRouteLink(),r=e.tag,n=e.data;return n.style=this.styles,this.isClickable&&(n.attrs=n.attrs||{},n.attrs.tabindex=0),t(r,this.setBackgroundColor(this.color,n),[this.genProgress(),this.$slots.default])}})},7118:function(t,e,r){r.d(e,{h7:function(){return s},ZB:function(){return o},EB:function(){return c}});var n=r(3237),i=r(4589),s=(0,i.Ji)("v-card__actions"),a=(0,i.Ji)("v-card__subtitle"),o=(0,i.Ji)("v-card__text"),c=(0,i.Ji)("v-card__title");n.Z},1058:function(t,e,r){r.d(e,{Z:function(){return c}});var n=r(4367),i=(r(9653),r(6952)),s=r(8085),a=r(2936),o=r(3325),c=(0,o.Z)(i.Z,s.Z,a.Z).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim:function(){var t=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",t)},classes:function(){return(0,n.Z)({"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive},this.themeClasses)},computedOpacity:function(){return Number(this.isActive?this.opacity:0)},styles:function(){return{zIndex:this.zIndex}}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render:function(t){var e=[this.__scrim];return this.isActive&&e.push(this.genContent()),t("div",{staticClass:"v-overlay",on:this.$listeners,class:this.classes,style:this.styles},e)}})},6591:function(t,e,r){var n=r(144);e["Z"]=n.Z.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}})},1485:function(t,e,r){r.d(e,{bo:function(){return n},Z6:function(){return i},Zd:function(){return s},hS:function(){return a}});var n="https://picpicker.alwaysdata.net/alegra/api/v1",i="https://picpicker.alwaysdata.net/serpapi",s=2,a=10},1130:function(t,e,r){r.d(e,{p5:function(){return l},if:function(){return d}});var n=r(8932),i=r(6198),s=(r(5666),r(1539),r(4747),r(1703),r(2222),r(9720),r(1485)),a=r(1618),o=r(7376),c=r(5321);function l(t){return u.apply(this,arguments)}function u(){return u=(0,i.Z)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log({store:o.Z}),o.Z.state.user.currentRace&&o.Z.state.user.currentRace.forEach((function(t){if(t.word===e)throw new Error("Word already exists")})),r=(0,c.JU)(a.ZP,"/users",""+o.Z.state.common.currentUser.id),t.next=5,(0,c.r7)(r,{race:[].concat((0,n.Z)(o.Z.state.user.currentRace),[{word:e,pictures:{}}])});case 5:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function d(t,e){return h.apply(this,arguments)}function h(){return h=(0,i.Z)(regeneratorRuntime.mark((function t(e,r){var n,l,u,d,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log({selected:r,selectionIndex:e}),n=(0,c.JU)(a.ZP,"/users",""+o.Z.state.common.currentUser.id),l=o.Z.state.user.currentRace,l[e].selected=r,u=o.Z.state.common.currentUser.sellers,Object.entries(l[e].pictures).forEach((function(t){u[t[0]].proposals-=1})),u[r.user].score+=3,d=null,u[r.user].score>=s.hS&&(d={sellers:u,winner:r.user,timestamp:Date.now()},setTimeout((function(){return l.forEach(function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=(0,c.JU)(a.ZP,"/users",e.user),t.next=4,(0,c.r7)(r,{raceDone:d});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error("Failed to notify end of race to "+e.user);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())}))),console.log({newRaceInfo:l,sellers:u}),h={race:l,sellers:u},d&&(h.raceDone=d),t.next=14,(0,c.r7)(n,h);case 14:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}},4562:function(t,e,r){r.r(e),r.d(e,{default:function(){return q}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[t.currentRace?r("div",[t.loading?r("v-overlay",{attrs:{absolute:t.absolute,value:t.loading}},[r("loading")],1):t._e(),r("div",[r("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[r("v-col",{attrs:{md:"8",sm:"12"}},[r("v-text-field",{attrs:{label:"WORD"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addSelection.apply(null,arguments)}},model:{value:t.word,callback:function(e){t.word=e},expression:"word"}},[r("template",{slot:"append"},[r("tooltip",{attrs:{text:"Create quiz"}},[r("v-btn",{attrs:{icon:"",disabled:!t.word},on:{click:t.addSelection}},[r("v-icon",[t._v("mdi-plus")])],1)],1),r("tooltip",{attrs:{text:"Create quiz and open"}},[r("v-btn",{attrs:{icon:"",disabled:!t.word},on:{click:t.addAndMove2Selection}},[r("v-icon",[t._v("mdi-open-in-new")])],1)],1)],1)],2)],1)],1),r("v-row",{attrs:{dense:""}},t._l(t.currentRaceSorted,(function(t,e){return r("v-col",{key:e},[r("selection-card",{attrs:{selection:t,index:+t.index}})],1)})),1)],1)],1):r("loading")],1)},i=[],s=r(6198),a=r(4367),o=(r(5666),r(2707),r(1249),r(9720),r(920)),c=r(629),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-btn",{staticClass:"add-card",attrs:{color:"primary","min-height":"60px","min-width":"200px"}},[r("v-card-text",[r("v-icon",{attrs:{"x-large":""}},[t._v("mdi-plus")])],1)],1)},u=[],d={},h=d,p=r(1001),f=r(3453),v=r.n(f),m=r(3150),g=r(7118),b=r(6428),Z=(0,p.Z)(h,l,u,!1,null,null,null),y=Z.exports;v()(Z,{VBtn:m.Z,VCardText:g.ZB,VIcon:b.Z});var w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{class:"all-card "+(t.done?"selected-card":"selection-card"),attrs:{"min-width":"300px","max-width":"300px",elevation:"5"},on:{click:t.openSelection}},[r("v-card-title",{staticStyle:{padding:"20px"}},[r("v-row",[t.selection.selected?r("v-icon",{attrs:{outlined:"",color:"green"}},[t._v("mdi-check")]):t._e(),r("div",[t._v(t._s(t.selection.word))]),r("v-spacer"),t.selection.selected?r("div",{staticClass:"winner-info"},[t._v(" by "+t._s(t.selection.selected.user)+" ")]):r("v-badge",{attrs:{color:t.pictsLength>2?"green":"red",content:+t.pictsLength||"0"}},[r("v-icon",[t._v(" mdi-image ")])],1)],1)],1),r("v-card-text",[t.selection.selected?r("v-img",{attrs:{src:t.selection.selected.thumbnail,"lazy-src":t.selection.selected.thumbnail,contain:"","max-height":"100px","min-height":"100px"}},[r("template",{slot:"placeholder"},[r("img-placeholder")],1)],2):t.pictsLength?r("div",[r("v-carousel",{attrs:{"hide-delimiters":"","show-arrows-on-hover":"",cycle:"",interval:t.slideInterval,"hide-delimiter-background":"",height:"100px"}},t._l(t.selection.pictures,(function(t,e){return r("div",{key:e,attrs:{text:t.title}},[r("v-carousel-item",[r("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[r("v-img",{staticClass:"my-3",attrs:{contain:"",src:t.thumbnail,"lazy-src":t.thumbnail,height:"100%"}},[r("template",{slot:"placeholder"},[r("img-placeholder")],1)],2)],1)],1)],1)})),0)],1):r("h4",[t._v("Awaiting proposals...")])],1)],1)},x=[],_=(r(9653),r(7873)),k={components:{ImgPlaceholder:_.Z},props:{selection:Object,index:{type:Number,requied:!0}},methods:{openSelection:function(){this.$router.push("/user/selection/"+(this.index+1))}},computed:{pictsLength:function(){return Object.entries(this.selection.pictures).length},slideInterval:function(){return 1300+400*Math.random()},done:function(){return Boolean(this.selection.selected)}}},C=k,B=r(3099),R=r(3237),S=r(7426),$=r(4062),V=r(7047),O=r(2877),E=r(9762),I=(0,p.Z)(C,w,x,!1,null,null,null),A=I.exports;v()(I,{VBadge:B.Z,VCard:R.Z,VCardText:g.ZB,VCardTitle:g.EB,VCarousel:S.Z,VCarouselItem:$.Z,VIcon:b.Z,VImg:V.Z,VRow:O.Z,VSpacer:E.Z});var P=r(1130),z=r(5418),L={components:{SelectionCard:A,AddCard:y,Loading:o.Z,Tooltip:z.Z},computed:(0,a.Z)((0,a.Z)({},(0,c.rn)("user",["currentRace"])),{},{currentRaceSorted:function(){if(Array.isArray(this.currentRace))return this.currentRace&&this.currentRace.map((function(t,e){return(0,a.Z)((0,a.Z)({},t),{},{index:e})})).sort((function(t,e){return Boolean(t.selected)-+Boolean(e.selected)||+Object.entries(e.pictures).length-+Object.entries(t.pictures).length}))}}),data:function(){return{word:"",loading:!1}},methods:{addSelection:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.word||t.$toast.error("Word must not be void"),e.prev=1,e.next=4,(0,P.p5)(t.word);case 4:return t.$toast.success("Added ".concat(t.word," quest")),t.word="",e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e["catch"](1),t.$toast.error(e.t0.message),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},addAndMove2Selection:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.addSelection();case 3:if(!e.sent){e.next=5;break}t.$router.push("/user/selection/"+t.currentRace.length);case 5:t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}},T=L,j=r(2102),J=r(9846),N=r(1058),X=r(314),U=(0,p.Z)(T,n,i,!1,null,null,null),q=U.exports;v()(U,{VBtn:m.Z,VCol:j.Z,VContainer:J.Z,VIcon:b.Z,VOverlay:N.Z,VRow:O.Z,VTextField:X.Z})}}]);
//# sourceMappingURL=29-legacy.06493823.js.map