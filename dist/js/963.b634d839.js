"use strict";(self["webpackChunkvendedores"]=self["webpackChunkvendedores"]||[]).push([[963],{6232:function(e,s,t){var a=t(3325),r=t(6210),i=t(6257);s["Z"]=(0,a.Z)(r.Z,(0,i.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const s=Object.values(e).includes(!0);this.$emit("input",!s)},deep:!0,immediate:!0}},methods:{watchInput(e){const s=e=>e.$watch("hasError",(s=>{this.$set(this.errorBag,e._uid,s)}),{immediate:!0}),t={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?t.shouldValidate=e.$watch("shouldValidate",(a=>{a&&(this.errorBag.hasOwnProperty(e._uid)||(t.valid=s(e)))})):t.valid=s(e),t},validate(){return 0===this.inputs.filter((e=>!e.validate(!0))).length},reset(){this.inputs.forEach((e=>e.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((e=>e.resetValidation())),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const s=this.inputs.find((s=>s._uid===e._uid));if(!s)return;const t=this.watchers.find((e=>e._uid===s._uid));t&&(t.valid(),t.shouldValidate()),this.watchers=this.watchers.filter((e=>e._uid!==s._uid)),this.inputs=this.inputs.filter((e=>e._uid!==s._uid)),this.$delete(this.errorBag,s._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},9762:function(e,s,t){t(8582);var a=t(4589);s["Z"]=(0,a.Ji)("spacer","div","v-spacer")},5963:function(e,s,t){t.r(s),t.d(s,{default:function(){return k}});var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("v-form",{on:{submit:function(s){return s.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.valid,callback:function(s){e.valid=s},expression:"valid"}},[t("v-container",[t("v-col",{attrs:{cols:"12",md:"12"}},[t("h2",{staticClass:"main-header"},[e._v("Enter your data")])]),t("v-col",{attrs:{cols:"12",md:"12"}},["user"===e.userType?t("v-text-field",{attrs:{disabled:e.loading,label:"User name*",required:"",type:"username"},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}}):t("v-select",{attrs:{disabled:e.loading,items:e.alegraSellers,"item-text":"name",label:"User name",loading:e.loadingSellers},model:{value:e.alegraSeller,callback:function(s){e.alegraSeller=s},expression:"alegraSeller"}})],1),t("v-col",{attrs:{cols:"12",md:"12"}},[t("v-select",{attrs:{label:"User type",items:["user","seller"],disabled:e.loading},model:{value:e.userType,callback:function(s){e.userType=s},expression:"userType"}})],1),t("v-col",{attrs:{cols:"12",md:"12"}},[t("v-text-field",{attrs:{disabled:e.loading,label:"e-mail"},model:{value:e.email,callback:function(s){e.email=s},expression:"email"}})],1),t("v-col",{attrs:{cols:"12",md:"12"}},[t("v-text-field",{attrs:{disabled:e.loading,label:"Password*",required:"",type:"password"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}})],1),t("v-col",{attrs:{cols:"12",md:"12"}},[t("v-text-field",{attrs:{disabled:e.loading,label:"Confirm password*",required:"",type:"password"},model:{value:e.confirmPassword,callback:function(s){e.confirmPassword=s},expression:"confirmPassword"}})],1),t("v-col",{attrs:{cols:"12",md:"12"}},[t("v-btn",{staticClass:"mr-4",staticStyle:{width:"100%"},attrs:{type:"submit",disabled:e.invalid}},[e.loading?t("v-progress-circular",{attrs:{indeterminate:"",color:"primary",width:"2"}}):t("div",[e._v("Sign-up")])],1)],1),t("v-col",{attrs:{cols:"12",md:"12"}},[t("v-row",{staticStyle:{padding:"20px"}},[t("v-spacer"),t("div",[e._v(" Already have an account?... "),t("router-link",{attrs:{to:"/login"}},[e._v(" Login ")])],1)],1)],1)],1)],1)},r=[],i=t(629),l=t(1618),n=t(9669),o=t.n(n);const d="https://api.alegra.com/api/v1",u="Basic ZHZlZ2FwOTVAZ21haWwuY29tOjc2NWQ2NTlmMDFiMTgyZjNkYmFh";async function c(){return(await o().get(d+"/sellers",{headers:{Authorization:u}})).data}var h={data(){return{valid:!1,username:"",email:"",password:"",confirmPassword:"",userType:"user",loading:!1,loadingSellers:!1,alegraSellers:null,alegraSeller:null}},computed:{invalid(){return this.loading||!(this.valid&&this.username&&this.password&&this.confirmPassword==this.password)}},methods:{...(0,i.nv)("common",["setCurrentUser"]),async submit(){try{this.loading=!0;let e={password:this.password,type:this.userType,email:this.email,race:[]};await(0,l.r4)(this.username,e),this.setCurrentUser({...e,id:this.username}),this.$router.push("#"),this.$toast.success("Welcome")}catch(e){this.$toast.error(e.message)}finally{this.loading=!1}}},watch:{async userType(e){if("seller"===e)try{this.loadingSellers=!0;let e=await c();this.alegraSellers=e,console.log(this.alegraSellers);let s=null;this.username&&(s=e.find((e=>e.name===this.username)),console.log("found",{seller:s})),s||(s=e[0]),this.username=s.name,this.alegraSeller=s.name}catch(s){this.$toast.error(s.message),this.userType="user"}finally{this.loadingSellers=!1}},alegraSeller:{handler(e){this.username="string"===typeof e?e:e.name},deep:!0}}},m=h,p=t(1001),v=t(3453),g=t.n(v),f=t(3150),w=t(2102),y=t(9846),b=t(6232),S=t(624),V=t(2877),Z=t(5390),_=t(9762),x=t(314),B=(0,p.Z)(m,a,r,!1,null,null,null),k=B.exports;g()(B,{VBtn:f.Z,VCol:w.Z,VContainer:y.Z,VForm:b.Z,VProgressCircular:S.Z,VRow:V.Z,VSelect:Z.Z,VSpacer:_.Z,VTextField:x.Z})}}]);
//# sourceMappingURL=963.b634d839.js.map