"use strict";(self["webpackChunkvendedores"]=self["webpackChunkvendedores"]||[]).push([[916],{5098:function(t,e,i){i.d(e,{Z:function(){return d}});var s=i(5648),o=i(8119),r=i(172),n=i(2936),a=i(8085),l=i(6591),c=i(3325),h=i(1824),d=(0,c.Z)(s.Z,n.Z,l.Z).extend({name:"v-alert",props:{border:{type:String,validator(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let t={staticClass:"v-alert__border",class:{[`v-alert__border--${this.border}`]:!0}};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible(){if(!this.dismissible)return null;const t=this.iconColor;return this.$createElement(o.Z,{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(r.Z,{props:{color:t}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(r.Z,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const t={...s.Z.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(t[`v-alert--border-${this.border}`]=!0),t},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&`$${this.type}`)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||a.Z.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&(0,h.fK)("outline","outlined",this)},methods:{genWrapper(){const t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){const e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(t){const e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},3099:function(t,e,i){i.d(e,{Z:function(){return d}});var s=i(6428),o=i(6952),r=i(8085),n=i(2936),a=i(6591),l=i(3536),c=i(3325),h=i(4589),d=(0,c.Z)(o.Z,(0,l.d)(["left","bottom"]),r.Z,n.Z,a.Z).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(t){return`calc(100% - ${(0,h.kb)(t||this.offset)})`},genBadge(){const t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),i=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),s=this.$createElement("span",i,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[s]):s},genBadgeContent(){if(this.dot)return;const t=(0,h.z9)(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(s.Z,this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(t){const e=[this.genBadgeWrapper()],i=[(0,h.z9)(this)],{"aria-atomic":s,"aria-label":o,"aria-live":r,role:n,title:a,...l}=this.$attrs;return this.inline&&this.left?i.unshift(e):i.push(e),t("span",{staticClass:"v-badge",attrs:l,class:this.classes},i)}})},6662:function(t,e,i){i.d(e,{Z:function(){return b}});var s=i(3242),o=i(5795),r=i(5907),n=i(3944),a=i(1058),l=a.Z,c=i(4589),h=i(144),d=h.Z.extend().extend({name:"overlayable",props:{hideOverlay:Boolean,overlayColor:String,overlayOpacity:[Number,String]},data(){return{animationFrame:0,overlay:null}},watch:{hideOverlay(t){this.isActive&&(t?this.removeOverlay():this.genOverlay())}},beforeDestroy(){this.removeOverlay()},methods:{createOverlay(){const t=new l({propsData:{absolute:this.absolute,value:!1,color:this.overlayColor,opacity:this.overlayOpacity}});t.$mount();const e=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");e&&e.insertBefore(t.$el,e.firstChild),this.overlay=t},genOverlay(){if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),this.animationFrame=requestAnimationFrame((()=>{this.overlay&&(void 0!==this.activeZIndex?this.overlay.zIndex=String(this.activeZIndex-1):this.$el&&(this.overlay.zIndex=(0,c.KK)(this.$el)),this.overlay.value=!0)})),!0},removeOverlay(t=!0){this.overlay&&((0,c.qh)(this.overlay.$el,"transitionend",(()=>{this.overlay&&this.overlay.$el&&this.overlay.$el.parentNode&&!this.overlay.value&&!this.isActive&&(this.overlay.$el.parentNode.removeChild(this.overlay.$el),this.overlay.$destroy(),this.overlay=null)})),cancelAnimationFrame(this.animationFrame),this.overlay.value=!1),t&&this.showScroll()},scrollListener(t){if("keydown"===t.type){if(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)||t.target.isContentEditable)return;const e=[c.Do.up,c.Do.pageup],i=[c.Do.down,c.Do.pagedown];if(e.includes(t.keyCode))t.deltaY=-1;else{if(!i.includes(t.keyCode))return;t.deltaY=1}}(t.target===this.overlay||"keydown"!==t.type&&t.target===document.body||this.checkPath(t))&&t.preventDefault()},hasScrollbar(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return(["auto","scroll"].includes(e.overflowY)||"SELECT"===t.tagName)&&t.scrollHeight>t.clientHeight||["auto","scroll"].includes(e.overflowX)&&t.scrollWidth>t.clientWidth},shouldScroll(t,e){if(t.hasAttribute("data-app"))return!1;const i=e.shiftKey||e.deltaX?"x":"y",s="y"===i?e.deltaY:e.deltaX||e.deltaY;let o,r;"y"===i?(o=0===t.scrollTop,r=t.scrollTop+t.clientHeight===t.scrollHeight):(o=0===t.scrollLeft,r=t.scrollLeft+t.clientWidth===t.scrollWidth);const n=s<0,a=s>0;return!(o||!n)||(!(r||!a)||!(!o&&!r)&&this.shouldScroll(t.parentNode,e))},isInside(t,e){return t===e||null!==t&&t!==document.body&&this.isInside(t.parentNode,e)},checkPath(t){const e=(0,c.iZ)(t);if("keydown"===t.type&&e[0]===document.body){const e=this.$refs.dialog,i=window.getSelection().anchorNode;return!(e&&this.hasScrollbar(e)&&this.isInside(i,e))||!this.shouldScroll(e,t)}for(let i=0;i<e.length;i++){const s=e[i];if(s===document)return!0;if(s===document.documentElement)return!0;if(s===this.$refs.content)return!0;if(this.hasScrollbar(s))return!this.shouldScroll(s,t)}return!0},hideScroll(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):((0,c.lj)(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}}),u=i(423),v=i(5703),p=i(2936),m=i(5600),g=i(3325),f=i(1824);const y=(0,g.Z)(o.Z,r.Z,n.Z,d,u.Z,v.Z,p.Z);var b=y.extend({name:"v-dialog",directives:{ClickOutside:m.Z},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,f.Jk)("full-width",this)},beforeMount(){this.$nextTick((()=>{this.isBooted=this.isActive,this.isActive&&this.show()}))},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick((()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout((()=>this.animate=!1),150)}))},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):d.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((()=>{this.$nextTick((()=>{this.$refs.content.contains(document.activeElement)||(this.previousActiveElement=document.activeElement,this.$refs.content.focus()),this.bind()}))}))},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===c.Do.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick((()=>t&&t.focus()))}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((t=>t.contains(e)))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find((t=>!t.hasAttribute("disabled")));e&&e.focus()}},genContent(){return this.showLazyContent((()=>[this.$createElement(s.Z,{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog",tabindex:this.isActive?0:void 0,"aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])]))},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:(0,c.kb)(this.maxWidth),width:(0,c.kb)(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},1058:function(t,e,i){i.d(e,{Z:function(){return a}});var s=i(6952),o=i(8085),r=i(2936),n=i(3325),a=(0,n.Z)(s.Z,o.Z,r.Z).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim(){const t=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",t)},classes(){return{"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive,...this.themeClasses}},computedOpacity(){return Number(this.isActive?this.opacity:0)},styles(){return{zIndex:this.zIndex}}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render(t){const e=[this.__scrim];return this.isActive&&e.push(this.genContent()),t("div",{staticClass:"v-overlay",on:this.$listeners,class:this.classes,style:this.styles},e)}})},6591:function(t,e,i){var s=i(144);e["Z"]=s.Z.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}})},1485:function(t,e,i){i.d(e,{bo:function(){return s},Z6:function(){return o},Zd:function(){return r},hS:function(){return n}});const s="https://picpicker.alwaysdata.net/alegra/api/v1",o="https://picpicker.alwaysdata.net/serpapi",r=2,n=10},5793:function(t,e,i){i.d(e,{Z:function(){return m}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{staticClass:"elevation-1",attrs:{title:"Select a race to engage with",headers:t.headers,items:t.users2render,loading:void 0===t.users2render,"fixed-header":"",dense:"","no-data-text":"No sellers yet"},scopedSlots:t._u([{key:"item.name",fn:function(e){var s=e.item;return[i("div",{class:s.me?"me":""},[t._v(" "+t._s(s.name)+" ")])]}}])},[i("template",{slot:"top"},[i("v-toolbar-title",{staticStyle:{padding:"20px","text-align":"center"}},[t._v(" Sellers race ranking ")])],1),i("template",{slot:"no-data"},[i("v-alert",{staticClass:"my-3",attrs:{type:"error",outlined:"",dense:""}},[t._v("No sellers yet")])],1)],2)},o=[],r=i(1485),n={props:{sellers:Object,myId:String},data(){return{snapshootUnsubscribe:null,headers:[{text:"Seller name",value:"name"},{text:"Proposals",value:"proposals"},{text:"Score",value:"score"},{text:"To win",value:"toWin"},{text:"Position",value:"position"}]}},computed:{users2render(){return Object.entries(this.sellers).map((t=>({...t[1],name:t[0],toWin:r.hS-t[1].score,me:this.myId&&t[0]===this.myId}))).sort(((t,e)=>e.score-t.score||e.proposals-t.proposals)).map(((t,e)=>({...t,position:0===e?"1st":1===e?"2nd":2===e?"3rd":e+1+"th"})))}}},a=n,l=i(1001),c=i(3453),h=i.n(c),d=i(5098),u=i(6310),v=i(7921),p=(0,l.Z)(a,s,o,!1,null,null,null),m=p.exports;h()(p,{VAlert:d.Z,VDataTable:u.Z,VToolbarTitle:v.qW})},9689:function(t,e,i){i.r(e),i.d(e,{default:function(){return S}});var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-app-bar",{attrs:{app:"",color:"primary",dark:"",height:"50"}},[s("div",{staticClass:"d-flex align-center"},[s("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Pict Picker Logo",contain:"",src:i(8509),transition:"scale-transition",width:"40"}})],1),s("h2",{staticClass:"main-header",staticStyle:{color:"white","margin-left":"5px","margin-top":"10px"}},[t._v(" Pic Picker ")]),s("v-spacer"),s("div",{staticStyle:{margin:"10px",cursor:"pointer"},on:{click:t.userClick}},[t._v(" "+t._s(t.currentUser.id)+" ")]),s("tooltip",{attrs:{text:"Sellers on the race"}},[s("v-badge",{attrs:{color:t.sellersColor,content:t.sellersLength,overlap:""}},[s("v-icon",{staticStyle:{margin:"5px",cursor:"pointer"},attrs:{dark:""},on:{click:function(e){t.scoreDialog=!0}}},[t._v("mdi-account-tie")])],1)],1),s("tooltip",{attrs:{text:"Go back"}},[s("v-icon",{staticStyle:{margin:"5px",cursor:"pointer"},attrs:{dark:""},on:{click:t.goBack}},[t._v("mdi-keyboard-backspace")])],1),s("logout",[s("v-icon",[t._v("mdi-logout")])],1)],1),s("router-view"),s("v-dialog",{model:{value:t.scoreDialog,callback:function(e){t.scoreDialog=e},expression:"scoreDialog"}},[s("scores",{attrs:{sellers:t.currentUser.sellers}})],1)],1)},o=[],r=i(4848),n=i(1618),a=i(5321),l=i(629),c=i(5418),h=i(5793),d={components:{Logout:r.Z,Tooltip:c.Z,Scores:h.Z},data(){return{scoreDialog:!1}},computed:{...(0,l.rn)("common",["currentUser"]),showLogout(){return"/user"===this.$router.currentRoute.fullPath},sellersLength(){return this.currentUser&&this.currentUser.sellers?Object.entries(this.currentUser.sellers).length||"0":"?"},sellersColor(){return"?"===this.sellersLength?"grey":this.sellersLength<2?"red":"green"}},mounted(){this.syncRace()},methods:{...(0,l.nv)("user",["setCurrentRace"]),...(0,l.nv)("common",["updateCurrentUser"]),goBack(){this.$router.back()},userClick(){"/user"!==this.$router.currentRoute.fullPath&&this.$router.push("/user")},syncRace(){const t=(0,a.JU)(n.ZP,"/users",""+this.currentUser.id);(0,a.cf)(t,(t=>{console.log("Current user change detected"),console.log({data:t.data()});try{let e=t.data();if(!e)return void console.log("aborted");let i=e.race;i||(i=[]),this.updateCurrentUser(e),this.setCurrentRace(i)}catch(e){this.$toast.error(e.message),this.setCurrentRace(null)}}))}}},u=d,v=i(1001),p=i(3453),m=i.n(p),g=i(3343),f=i(3099),y=i(9846),b=i(6662),C=i(6428),$=i(7047),w=i(9762),k=(0,v.Z)(u,s,o,!1,null,null,null),S=k.exports;m()(k,{VAppBar:g.Z,VBadge:f.Z,VContainer:y.Z,VDialog:b.Z,VIcon:C.Z,VImg:$.Z,VSpacer:w.Z})}}]);
//# sourceMappingURL=916.10fd6bd7.js.map