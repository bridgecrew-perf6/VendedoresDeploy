"use strict";(self["webpackChunkvendedores"]=self["webpackChunkvendedores"]||[]).push([[29],{3099:function(t,e,s){s.d(e,{Z:function(){return u}});var r=s(6428),n=s(6952),i=s(8085),a=s(2936),o=s(6591),l=s(3536),c=s(3325),d=s(4589),u=(0,c.Z)(n.Z,(0,l.d)(["left","bottom"]),i.Z,a.Z,o.Z).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(t){return`calc(100% - ${(0,d.kb)(t||this.offset)})`},genBadge(){const t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),s=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),r=this.$createElement("span",s,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[r]):r},genBadgeContent(){if(this.dot)return;const t=(0,d.z9)(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(r.Z,this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(t){const e=[this.genBadgeWrapper()],s=[(0,d.z9)(this)],{"aria-atomic":r,"aria-label":n,"aria-live":i,role:a,title:o,...l}=this.$attrs;return this.inline&&this.left?s.unshift(e):s.push(e),t("span",{staticClass:"v-badge",attrs:l,class:this.classes},s)}})},3237:function(t,e,s){s.d(e,{Z:function(){return o}});var r=s(5648),n=s(4981),i=s(6505),a=s(3325),o=(0,a.Z)(n.Z,i.Z,r.Z).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes(){return{"v-card":!0,...i.Z.options.computed.classes.call(this),"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised,...r.Z.options.computed.classes.call(this)}},styles(){const t={...r.Z.options.computed.styles.call(this)};return this.img&&(t.background=`url("${this.img}") center center / cover no-repeat`),t}},methods:{genProgress(){const t=n.Z.options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render(t){const{tag:e,data:s}=this.generateRouteLink();return s.style=this.styles,this.isClickable&&(s.attrs=s.attrs||{},s.attrs.tabindex=0),t(e,this.setBackgroundColor(this.color,s),[this.genProgress(),this.$slots.default])}})},7118:function(t,e,s){s.d(e,{h7:function(){return i},ZB:function(){return o},EB:function(){return l}});var r=s(3237),n=s(4589);const i=(0,n.Ji)("v-card__actions"),a=(0,n.Ji)("v-card__subtitle"),o=(0,n.Ji)("v-card__text"),l=(0,n.Ji)("v-card__title");r.Z},2102:function(t,e,s){s(7273);var r=s(144),n=s(6290),i=s(4589);const a=["sm","md","lg","xl"],o=(()=>a.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),l=(()=>a.reduce(((t,e)=>(t["offset"+(0,i.jC)(e)]={type:[String,Number],default:null},t)),{}))(),c=(()=>a.reduce(((t,e)=>(t["order"+(0,i.jC)(e)]={type:[String,Number],default:null},t)),{}))(),d={col:Object.keys(o),offset:Object.keys(l),order:Object.keys(c)};function u(t,e,s){let r=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");r+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(r+=`-${s}`,r.toLowerCase()):r.toLowerCase()}}const h=new Map;e["Z"]=r.Z.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...o,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:r,parent:i}){let a="";for(const n in e)a+=String(e[n]);let o=h.get(a);if(!o){let t;for(t in o=[],d)d[t].forEach((s=>{const r=e[s],n=u(t,s,r);n&&o.push(n)}));const s=o.some((t=>t.startsWith("col-")));o.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),h.set(a,o)}return t(e.tag,(0,n.ZP)(s,{class:o}),r)}})},2877:function(t,e,s){s(7273);var r=s(144),n=s(6290),i=s(4589);const a=["sm","md","lg","xl"],o=["start","end","center"];function l(t,e){return a.reduce(((s,r)=>(s[t+(0,i.jC)(r)]=e(),s)),{})}const c=t=>[...o,"baseline","stretch"].includes(t),d=l("align",(()=>({type:String,default:null,validator:c}))),u=t=>[...o,"space-between","space-around"].includes(t),h=l("justify",(()=>({type:String,default:null,validator:u}))),p=t=>[...o,"space-between","space-around","stretch"].includes(t),f=l("alignContent",(()=>({type:String,default:null,validator:p}))),g={align:Object.keys(d),justify:Object.keys(h),alignContent:Object.keys(f)},v={align:"align",justify:"justify",alignContent:"align-content"};function m(t,e,s){let r=v[t];if(null!=s){if(e){const s=e.replace(t,"");r+=`-${s}`}return r+=`-${s}`,r.toLowerCase()}}const y=new Map;e["Z"]=r.Z.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c},...d,justify:{type:String,default:null,validator:u},...h,alignContent:{type:String,default:null,validator:p},...f},render(t,{props:e,data:s,children:r}){let i="";for(const n in e)i+=String(e[n]);let a=y.get(i);if(!a){let t;for(t in a=[],g)g[t].forEach((s=>{const r=e[s],n=m(t,s,r);n&&a.push(n)}));a.push({"no-gutters":e.noGutters,"row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),y.set(i,a)}return t(e.tag,(0,n.ZP)(s,{staticClass:"row",class:a}),r)}})},9762:function(t,e,s){s(8582);var r=s(4589);e["Z"]=(0,r.Ji)("spacer","div","v-spacer")},1058:function(t,e,s){s.d(e,{Z:function(){return o}});var r=s(6952),n=s(8085),i=s(2936),a=s(3325),o=(0,a.Z)(r.Z,n.Z,i.Z).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim(){const t=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",t)},classes(){return{"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive,...this.themeClasses}},computedOpacity(){return Number(this.isActive?this.opacity:0)},styles(){return{zIndex:this.zIndex}}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render(t){const e=[this.__scrim];return this.isActive&&e.push(this.genContent()),t("div",{staticClass:"v-overlay",on:this.$listeners,class:this.classes,style:this.styles},e)}})},6591:function(t,e,s){var r=s(144);e["Z"]=r.Z.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}})},1485:function(t,e,s){s.d(e,{bo:function(){return r},Z6:function(){return n},Zd:function(){return i},hS:function(){return a}});const r="https://picpicker.alwaysdata.net/alegra/api/v1",n="https://picpicker.alwaysdata.net/serpapi",i=2,a=20},1130:function(t,e,s){s.d(e,{p5:function(){return o},if:function(){return l}});s(1703);var r=s(1485),n=s(1618),i=s(7376),a=s(5321);async function o(t){console.log({store:i.Z}),i.Z.state.user.currentRace&&i.Z.state.user.currentRace.forEach((e=>{if(e.word===t)throw new Error("Word already exists")}));const e=(0,a.JU)(n.ZP,"/users",""+i.Z.state.common.currentUser.id);await(0,a.r7)(e,{race:[...i.Z.state.user.currentRace,{word:t,pictures:{}}]})}async function l(t,e){console.log({selected:e,selectionIndex:t});const s=(0,a.JU)(n.ZP,"/users",""+i.Z.state.common.currentUser.id);let o=i.Z.state.user.currentRace;o[t].selected=e;let l=i.Z.state.common.currentUser.sellers;Object.entries(o[t].pictures).forEach((t=>{l[t[0]].proposals-=1})),l[e.user].score+=3;let c=null;l[e.user].score>=r.hS&&(c={sellers:l,winner:e.user,timestamp:Date.now()},setTimeout((()=>o.forEach((async t=>{try{let e=(0,a.JU)(n.ZP,"/users",t.user);await(0,a.r7)(e,{raceDone:c})}catch(e){console.error("Failed to notify end of race to "+t.user)}}))))),console.log({newRaceInfo:o,sellers:l});let d={race:o,sellers:l};c&&(d.raceDone=c),await(0,a.r7)(s,d)}},4562:function(t,e,s){s.r(e),s.d(e,{default:function(){return X}});var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[t.currentRace?s("div",[t.loading?s("v-overlay",{attrs:{absolute:t.absolute,value:t.loading}},[s("loading")],1):t._e(),s("div",[s("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[s("v-col",{attrs:{md:"8",sm:"12"}},[s("v-text-field",{attrs:{label:"WORD"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addSelection.apply(null,arguments)}},model:{value:t.word,callback:function(e){t.word=e},expression:"word"}},[s("template",{slot:"append"},[s("tooltip",{attrs:{text:"Create quiz"}},[s("v-btn",{attrs:{icon:"",disabled:!t.word},on:{click:t.addSelection}},[s("v-icon",[t._v("mdi-plus")])],1)],1),s("tooltip",{attrs:{text:"Create quiz and open"}},[s("v-btn",{attrs:{icon:"",disabled:!t.word},on:{click:t.addAndMove2Selection}},[s("v-icon",[t._v("mdi-open-in-new")])],1)],1)],1)],2)],1)],1),s("v-row",{attrs:{dense:""}},t._l(t.currentRaceSorted,(function(t,e){return s("v-col",{key:e},[s("selection-card",{attrs:{selection:t,index:+t.index}})],1)})),1)],1)],1):s("loading")],1)},n=[],i=s(920),a=s(629),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-btn",{staticClass:"add-card",attrs:{color:"primary","min-height":"60px","min-width":"200px"}},[s("v-card-text",[s("v-icon",{attrs:{"x-large":""}},[t._v("mdi-plus")])],1)],1)},l=[],c={},d=c,u=s(1001),h=s(3453),p=s.n(h),f=s(3150),g=s(7118),v=s(6428),m=(0,u.Z)(d,o,l,!1,null,null,null),y=m.exports;p()(m,{VBtn:f.Z,VCardText:g.ZB,VIcon:v.Z});var b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{class:"all-card "+(t.done?"selected-card":"selection-card"),attrs:{"min-width":"300px","max-width":"300px",elevation:"5"},on:{click:t.openSelection}},[s("v-card-title",{staticStyle:{padding:"20px"}},[s("v-row",[t.selection.selected?s("v-icon",{attrs:{outlined:"",color:"green"}},[t._v("mdi-check")]):t._e(),s("div",[t._v(t._s(t.selection.word))]),s("v-spacer"),t.selection.selected?s("div",{staticClass:"winner-info"},[t._v(" by "+t._s(t.selection.selected.user)+" ")]):s("v-badge",{attrs:{color:t.pictsLength>2?"green":"red",content:+t.pictsLength||"0"}},[s("v-icon",[t._v(" mdi-image ")])],1)],1)],1),s("v-card-text",[t.selection.selected?s("v-img",{attrs:{src:t.selection.selected.thumbnail,"lazy-src":t.selection.selected.thumbnail,contain:"","max-height":"100px","min-height":"100px"}},[s("template",{slot:"placeholder"},[s("img-placeholder")],1)],2):t.pictsLength?s("div",[s("v-carousel",{attrs:{"hide-delimiters":"","show-arrows-on-hover":"",cycle:"",interval:t.slideInterval,"hide-delimiter-background":"",height:"100px"}},t._l(t.selection.pictures,(function(t,e){return s("div",{key:e,attrs:{text:t.title}},[s("v-carousel-item",[s("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[s("v-img",{staticClass:"my-3",attrs:{contain:"",src:t.thumbnail,"lazy-src":t.thumbnail,height:"100%"}},[s("template",{slot:"placeholder"},[s("img-placeholder")],1)],2)],1)],1)],1)})),0)],1):s("h4",[t._v("Awaiting proposals...")])],1)],1)},Z=[],w=s(7873),C={components:{ImgPlaceholder:w.Z},props:{selection:Object,index:{type:Number,requied:!0}},methods:{openSelection(){this.$router.push("/user/selection/"+(this.index+1))}},computed:{pictsLength(){return Object.entries(this.selection.pictures).length},slideInterval(){return 1300+400*Math.random()},done(){return Boolean(this.selection.selected)}}},S=C,x=s(3099),_=s(3237),$=s(7426),B=s(4062),k=s(7047),j=s(2877),O=s(9762),R=(0,u.Z)(S,b,Z,!1,null,null,null),V=R.exports;p()(R,{VBadge:x.Z,VCard:_.Z,VCardText:g.ZB,VCardTitle:g.EB,VCarousel:$.Z,VCarouselItem:B.Z,VIcon:v.Z,VImg:k.Z,VRow:j.Z,VSpacer:O.Z});var E=s(1130),I=s(5418),N={components:{SelectionCard:V,AddCard:y,Loading:i.Z,Tooltip:I.Z},computed:{...(0,a.rn)("user",["currentRace"]),currentRaceSorted(){if(Array.isArray(this.currentRace))return this.currentRace&&this.currentRace.map(((t,e)=>({...t,index:e}))).sort(((t,e)=>Boolean(t.selected)-+Boolean(e.selected)||+Object.entries(e.pictures).length-+Object.entries(t.pictures).length))}},data(){return{word:"",loading:!1}},methods:{async addSelection(){this.word||this.$toast.error("Word must not be void");try{return await(0,E.p5)(this.word),this.$toast.success(`Added ${this.word} quest`),this.word="",!0}catch(t){return this.$toast.error(t.message),!1}},async addAndMove2Selection(){this.loading=!0,await this.addSelection()&&this.$router.push("/user/selection/"+this.currentRace.length),this.loading=!1}}},P=N,A=s(2102),L=s(9846),z=s(1058),J=s(314),T=(0,u.Z)(P,r,n,!1,null,null,null),X=T.exports;p()(T,{VBtn:f.Z,VCol:A.Z,VContainer:L.Z,VIcon:v.Z,VOverlay:z.Z,VRow:j.Z,VTextField:J.Z})}}]);
//# sourceMappingURL=29.37362bfd.js.map