{"version":3,"file":"js/841.158c7036.js","mappings":"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","sources":["webpack://vendedores/../../../src/components/VCard/VCard.ts","webpack://vendedores/../../../src/components/VCard/index.ts","webpack://vendedores/./src/common/utils/index.js","webpack://vendedores/./src/common/services/alegraSellersService.js","webpack://vendedores/./src/common/components/ConfirmDialog.vue?041f","webpack://vendedores/src/common/components/ConfirmDialog.vue","webpack://vendedores/./src/common/components/ConfirmDialog.vue?b7c2","webpack://vendedores/./src/common/components/ConfirmDialog.vue","webpack://vendedores/./src/common/views/RaceDoneView.vue?0fc7","webpack://vendedores/src/common/views/RaceDoneView.vue","webpack://vendedores/./src/common/views/RaceDoneView.vue?1172","webpack://vendedores/./src/common/views/RaceDoneView.vue"],"sourcesContent":["// Styles\nimport './VCard.sass'\n\n// Extensions\nimport VSheet from '../VSheet'\n\n// Mixins\nimport Loadable from '../../mixins/loadable'\nimport Routable from '../../mixins/routable'\n\n// Helpers\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default mixins(\n  Loadable,\n  Routable,\n  VSheet\n).extend({\n  name: 'v-card',\n\n  props: {\n    flat: Boolean,\n    hover: Boolean,\n    img: String,\n    link: Boolean,\n    loaderHeight: {\n      type: [Number, String],\n      default: 4,\n    },\n    raised: Boolean,\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-card': true,\n        ...Routable.options.computed.classes.call(this),\n        'v-card--flat': this.flat,\n        'v-card--hover': this.hover,\n        'v-card--link': this.isClickable,\n        'v-card--loading': this.loading,\n        'v-card--disabled': this.disabled,\n        'v-card--raised': this.raised,\n        ...VSheet.options.computed.classes.call(this),\n      }\n    },\n    styles (): object {\n      const style: Dictionary<string> = {\n        ...VSheet.options.computed.styles.call(this),\n      }\n\n      if (this.img) {\n        style.background = `url(\"${this.img}\") center center / cover no-repeat`\n      }\n\n      return style\n    },\n  },\n\n  methods: {\n    genProgress () {\n      const render = Loadable.options.methods.genProgress.call(this)\n\n      if (!render) return null\n\n      return this.$createElement('div', {\n        staticClass: 'v-card__progress',\n        key: 'progress',\n      }, [render])\n    },\n  },\n\n  render (h): VNode {\n    const { tag, data } = this.generateRouteLink()\n\n    data.style = this.styles\n\n    if (this.isClickable) {\n      data.attrs = data.attrs || {}\n      data.attrs.tabindex = 0\n    }\n\n    return h(tag, this.setBackgroundColor(this.color, data), [\n      this.genProgress(),\n      this.$slots.default,\n    ])\n  },\n})\n","import VCard from './VCard'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nconst VCardActions = createSimpleFunctional('v-card__actions')\nconst VCardSubtitle = createSimpleFunctional('v-card__subtitle')\nconst VCardText = createSimpleFunctional('v-card__text')\nconst VCardTitle = createSimpleFunctional('v-card__title')\n\nexport {\n  VCard,\n  VCardActions,\n  VCardSubtitle,\n  VCardText,\n  VCardTitle,\n}\n\nexport default {\n  $_vuetify_subcomponents: {\n    VCard,\n    VCardActions,\n    VCardSubtitle,\n    VCardText,\n    VCardTitle,\n  },\n}\n","export function formatDate(date = Date.now()) {\r\n    var d = new Date(date),\r\n        month = '' + (d.getMonth() + 1),\r\n        day = '' + d.getDate(),\r\n        year = d.getFullYear();\r\n\r\n    if (month.length < 2) \r\n        month = '0' + month;\r\n    if (day.length < 2) \r\n        day = '0' + day;\r\n\r\n    return [year, month, day].join('-');\r\n}","import axios from \"axios\";\r\nimport { alegra_api } from \"../config\";\r\nimport { formatDate } from \"../utils\";\r\n\r\n\r\n\r\nexport async function getSellers() {\r\n    return (await axios.get(alegra_api + '/sellers')).data;\r\n}\r\n\r\nexport async function createInvoice(quantity, seller) {\r\n    console.log({ quantity, seller });\r\n    let date = Date.now();\r\n    return (await axios.post(alegra_api + '/invoices',\r\n\r\n        {\r\n            date: formatDate(date),\r\n            dueDate: formatDate(date + 1000 * 3600 * 24 * 8),// 8 dÃ­as\r\n            client: 1,\r\n            items: [\r\n                {\r\n                    \"id\": 1,\r\n                    \"price\": 1,\r\n                    quantity\r\n                }\r\n            ],\r\n            seller,\r\n            status: \"open\"\r\n        }\r\n    )).data;\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"290\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"text-h5\"},[_vm._v(\" \"+_vm._s(_vm.title || \"Confirm?\")+\" \")]),(_vm.text)?_c('v-card-text',[_vm._v(_vm._s(_vm.text))]):_vm._e(),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"secondary darken-1\",\"text\":\"\"},on:{\"click\":_vm.cancel}},[_vm._v(\" \"+_vm._s(_vm.cancelText || \"cancel\")+\" \")]),_c('v-btn',{attrs:{\"color\":\"primary darken-1\",\"text\":\"\"},on:{\"click\":_vm.accept}},[_vm._v(\" \"+_vm._s(_vm.okText || \"ok\")+\" \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-row justify=\"center\">\r\n    <v-dialog\r\n      v-model=\"value\"\r\n      persistent\r\n      max-width=\"290\"\r\n    >\r\n      <v-card>\r\n        <v-card-title class=\"text-h5\">\r\n          {{title || \"Confirm?\"}}\r\n        </v-card-title>\r\n        <v-card-text v-if=\"text\">{{text}}</v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            color=\"secondary darken-1\"\r\n            text\r\n            @click=\"cancel\"\r\n          >\r\n            {{cancelText || \"cancel\"}}\r\n          </v-btn>\r\n          <v-btn\r\n            color=\"primary darken-1\"\r\n            text\r\n            @click=\"accept\"\r\n          >\r\n            {{okText || \"ok\"}}\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-row>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n       title:String,\r\n       text:String,\r\n       okText:String,\r\n       cancelText:String,\r\n       value:Boolean,\r\n    },\r\n    methods:{\r\n        accept(){\r\n            this.$emit('input',false);\r\n            this.$emit('accept',true);\r\n        },\r\n        cancel(){\r\n            this.$emit('input',false);\r\n            // this.$emit('cancel');\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ConfirmDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ConfirmDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfirmDialog.vue?vue&type=template&id=860604ac&\"\nimport script from \"./ConfirmDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfirmDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VRow,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-row',{attrs:{\"align-content\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"text-subtitle-1 text-center\",attrs:{\"cols\":\"12\"}},[_c('v-alert',{attrs:{\"type\":_vm.currentUser.type === 'user'\n\t\t\t\t\t\t? 'info'\n\t\t\t\t\t\t: _vm.winner\n\t\t\t\t\t\t? 'success'\n\t\t\t\t\t\t: 'error',\"text\":\"\"}},[_c('h2',{staticClass:\"main-header\",style:(_vm.titleStyle)},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticStyle:{\"font-size\":\"small\"}},[_vm._v(\" Race finished at \"+_vm._s(_vm.finishDate)+\" \")])])],1)],1),_c('v-row',{staticClass:\"my-5\",attrs:{\"align-content\":\"center\",\"justify\":\"center\"}},[_c('scores',{staticStyle:{\"min-width\":\"98%\",\"max-width\":\"700px\"},attrs:{\"sellers\":_vm.raceDone.sellers,\"myId\":_vm.currentUser.id}})],1),(_vm.currentUser.type === 'seller')?_c('v-row',{staticClass:\"my-1\",attrs:{\"align-content\":\"center\",\"justify\":\"center\"}},[(_vm.winner)?_c('div',{staticClass:\"text-subtitle-1 text-center py-2\",attrs:{\"cols\":\"12\"}},[_c('article',[_vm._v(\" As the winer of the race you may now generate an \"),_c('a',{attrs:{\"href\":\"alegra.com\"}},[_vm._v(\"Alegra\")]),_vm._v(\" invoice. Once it's done you can delete all your records of the race and start from scratch with another race if you want to \")])]):_c('div',{staticClass:\"text-subtitle-1 text-center py-2\",attrs:{\"cols\":\"12\"}},[_c('article',[_vm._v(\" You can delete all your records of the race and start from scratch with another race if you want to \")])])]):_vm._e(),(_vm.winner)?_c('v-row',{staticClass:\"my-2\",attrs:{\"align-content\":\"center\",\"justify\":\"center\",\"cols\":\"12\"},on:{\"click\":_vm.generateInvoice}},[_c('v-btn',{attrs:{\"width\":\"200\",\"disabled\":_vm.raceDone.invoice}},[(_vm.loadingInvoice)?_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\",\"width\":\"2\"}}):_c('div',[_vm._v(\"generateInvoice\")])],1)],1):_vm._e(),(_vm.currentUser.type === 'seller')?_c('v-row',{staticClass:\"my-2\",attrs:{\"align-content\":\"center\",\"justify\":\"center\"}},[_c('v-btn',{attrs:{\"width\":\"200\",\"disabled\":_vm.winner && !_vm.raceDone.invoice},on:{\"click\":function($event){_vm.confirmDialog = true}}},[(_vm.loadingFromScratch)?_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\",\"width\":\"2\"}}):_c('div',[_vm._v(\"Start from scratch\")])],1)],1):_vm._e(),_c('confirm-dialog',{attrs:{\"text\":\"You won't be able to see the information related to this race anymore\"},on:{\"accept\":_vm.resetSeller},model:{value:(_vm.confirmDialog),callback:function ($$v) {_vm.confirmDialog=$$v},expression:\"confirmDialog\"}}),_vm._v(\" > \")],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<v-container>\r\n\t\t<v-row align-content=\"center\" justify=\"center\">\r\n\t\t\t<v-col class=\"text-subtitle-1 text-center\" cols=\"12\">\r\n\t\t\t\t<v-alert\r\n\t\t\t\t\t:type=\"\r\n\t\t\t\t\t\tcurrentUser.type === 'user'\r\n\t\t\t\t\t\t\t? 'info'\r\n\t\t\t\t\t\t\t: winner\r\n\t\t\t\t\t\t\t? 'success'\r\n\t\t\t\t\t\t\t: 'error'\r\n\t\t\t\t\t\"\r\n\t\t\t\t\ttext\r\n\t\t\t\t>\r\n\t\t\t\t\t<h2 class=\"main-header\" :style=\"titleStyle\">{{ title }}</h2>\r\n\t\t\t\t\t<div style=\"font-size: small\">\r\n\t\t\t\t\t\tRace finished at {{ finishDate }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</v-alert>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t\t<v-row align-content=\"center\" justify=\"center\" class=\"my-5\">\r\n\t\t\t<scores\r\n\t\t\t\t:sellers=\"raceDone.sellers\"\r\n\t\t\t\t:myId=\"currentUser.id\"\r\n\t\t\t\tstyle=\"min-width: 98%; max-width: 700px\"\r\n\t\t\t/>\r\n\t\t</v-row>\r\n\t\t<v-row align-content=\"center\" justify=\"center\" class=\"my-1\" v-if=\"currentUser.type === 'seller'\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\"text-subtitle-1 text-center py-2\"\r\n\t\t\t\tcols=\"12\"\r\n\t\t\t\tv-if=\"winner\"\r\n\t\t\t>\r\n\t\t\t\t<article>\r\n\t\t\t\t\tAs the winer of the race you may now generate an\r\n\t\t\t\t\t<a href=\"alegra.com\">Alegra</a> invoice. Once it's done you\r\n\t\t\t\t\tcan delete all your records of the race and start from\r\n\t\t\t\t\tscratch with another race if you want to\r\n\t\t\t\t</article>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"text-subtitle-1 text-center py-2\" cols=\"12\" v-else>\r\n\t\t\t\t<article>\r\n\t\t\t\t\tYou can delete all your records of the race and start from\r\n\t\t\t\t\tscratch with another race if you want to\r\n\t\t\t\t</article>\r\n\t\t\t</div>\r\n\t\t</v-row>\r\n\t\t<v-row\r\n\t\t\talign-content=\"center\"\r\n\t\t\tjustify=\"center\"\r\n\t\t\tclass=\"my-2\"\r\n\t\t\tv-if=\"winner\"\r\n\t\t\tcols=\"12\"\r\n\t\t\t@click=\"generateInvoice\"\r\n\t\t>\r\n\t\t\t<v-btn width=\"200\" :disabled=\"raceDone.invoice\">\r\n\t\t\t\t<v-progress-circular\r\n\t\t\t\t\tv-if=\"loadingInvoice\"\r\n\t\t\t\t\tindeterminate\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\twidth=\"2\"\r\n\t\t\t\t/>\r\n\t\t\t\t<div v-else>generateInvoice</div>\r\n\t\t\t</v-btn>\r\n\t\t</v-row>\r\n\t\t<v-row align-content=\"center\" justify=\"center\" class=\"my-2\" v-if=\"currentUser.type === 'seller'\">\r\n\t\t\t<v-btn\r\n\t\t\t\twidth=\"200\"\r\n\t\t\t\t:disabled=\"winner && !raceDone.invoice\"\r\n\t\t\t\t@click=\"confirmDialog = true\"\r\n\t\t\t>\r\n\t\t\t\t<v-progress-circular\r\n\t\t\t\t\tv-if=\"loadingFromScratch\"\r\n\t\t\t\t\tindeterminate\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\twidth=\"2\"\r\n\t\t\t\t/>\r\n\t\t\t\t<div v-else>Start from scratch</div>\r\n\t\t\t</v-btn>\r\n\t\t</v-row>\r\n\t\t<confirm-dialog\r\n\t\t\ttext=\"You won't be able to see the information related to this race anymore\"\r\n\t\t\tv-model=\"confirmDialog\"\r\n\t\t\t@accept=\"resetSeller\"\r\n\t\t/>\r\n\t\t>\r\n\t</v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from \"vuex\";\r\nimport Scores from \"../components/Scores.vue\";\r\nimport { updateUser } from \"@/common/services/firebaseUserService\";\r\nimport { createInvoice } from \"../services/alegraSellersService\";\r\nimport ConfirmDialog from \"../components/ConfirmDialog.vue\";\r\n\r\nexport default {\r\n\tcomponents: { Scores, ConfirmDialog },\r\n\tdata() {\r\n\t\treturn { loadingInvoice: false, loadingFromScratch: false, confirmDialog:false };\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState(\"common\", [\"currentUser\"]),\r\n\t\traceDone() {\r\n\t\t\treturn this.currentUser.raceDone;\r\n\t\t},\r\n\t\twinner() {\r\n\t\t\treturn this.raceDone.winner === this.currentUser.id;\r\n\t\t},\r\n\t\ttitle() {\r\n\t\t\treturn this.winner\r\n\t\t\t\t? \"Congrats, you Won\"\r\n\t\t\t\t: `Race has finished, ${this.raceDone.winner} won`;\r\n\t\t},\r\n\t\tfinishDate() {\r\n\t\t\treturn new Date(this.raceDone.timestamp).toLocaleString();\r\n\t\t},\r\n\t\ttitleStyle() {\r\n\t\t\treturn this.currentUser.type === \"user\"\r\n\t\t\t\t? \"color:blue\"\r\n\t\t\t\t: this.winner\r\n\t\t\t\t? \"color:green\"\r\n\t\t\t\t: \"color:red\";\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions(\"common\", [\"updateCurrentUser\"]),\r\n\t\t...mapActions([\"resetState\"]),\r\n\t\tasync resetSeller() {\r\n\t\t\tif (this.currentUser.type !== \"seller\") return;\r\n\t\t\tthis.loadingFromScratch = true;\r\n\t\t\ttry {\r\n\t\t\t\tlet user = this.currentUser;\r\n\t\t\t\tuser.raceUser = null;\r\n\t\t\t\tuser.raceDone = null;\r\n\t\t\t\tconsole.log({ user }, { id: this.currentUser.id });\r\n\t\t\t\tawait updateUser(this.currentUser.id, user);\r\n\t\t\t\tthis.$router.push({ path: \"/\" });\r\n\t\t\t\tthis.updateCurrentUser(user);\r\n\t\t\t\tthis.resetState();\r\n\t\t\t\tthis.$toast.success(\"Done!, you can start from scratch now\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.$toast.error(e.message);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loadingFromScratch = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync generateInvoice() {\r\n\t\t\tthis.loadingInvoice = true;\r\n\t\t\tlet q = 0;\r\n\t\t\tfor (const key in this.raceDone.sellers) {\r\n\t\t\t\tif (Object.hasOwnProperty.call(this.raceDone.sellers, key)) {\r\n\t\t\t\t\tconst element = this.raceDone.sellers[key];\r\n\t\t\t\t\tq += element.score;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.currentUser.alegraInfo)\r\n\t\t\t\t\tthrow new Error(\"Account not linked to alegra\");\r\n\t\t\t\tlet invoice = await createInvoice(\r\n\t\t\t\t\tq,\r\n\t\t\t\t\tthis.currentUser.alegraInfo\r\n\t\t\t\t);\r\n\t\t\t\tlet raceDone = this.raceDone;\r\n\t\t\t\traceDone.invoice = invoice;\r\n\r\n\t\t\t\tthis.updateCurrentUser({ raceDone });\r\n\t\t\t\tawait updateUser(this.currentUser.raceUser, { raceDone });\r\n\t\t\t\tsetTimeout(() => updateUser(this.currentUser.id, { raceDone }));\r\n\t\t\t\tthis.$toast.success(\"Invoice created\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.$toast.error(e.message);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loadingInvoice = false;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RaceDoneView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RaceDoneView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RaceDoneView.vue?vue&type=template&id=80164a2e&\"\nimport script from \"./RaceDoneView.vue?vue&type=script&lang=js&\"\nexport * from \"./RaceDoneView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAlert,VBtn,VCol,VContainer,VProgressCircular,VRow})\n"],"names":["mixins","Loadable","Routable","VSheet","extend","name","props","flat","Boolean","hover","img","String","link","loaderHeight","type","Number","default","raised","computed","classes","this","isClickable","loading","disabled","styles","style","background","methods","genProgress","render","$createElement","staticClass","key","h","tag","data","generateRouteLink","attrs","tabindex","setBackgroundColor","color","$slots","VCardActions","createSimpleFunctional","VCardSubtitle","VCardText","VCardTitle","formatDate","date","Date","now","d","month","getMonth","day","getDate","year","getFullYear","length","join","async","getSellers","axios","alegra_api","createInvoice","quantity","seller","console","log","dueDate","client","items","status","_vm","_h","_c","_self","model","value","callback","$$v","expression","_v","_s","title","text","_e","on","cancel","cancelText","accept","okText","staticRenderFns","component","VBtn","currentUser","winner","staticStyle","finishDate","raceDone","sellers","id","generateInvoice","invoice","$event","confirmDialog","resetSeller","components","Scores","ConfirmDialog","loadingInvoice","loadingFromScratch","titleStyle","user","path","q","setTimeout","VAlert"],"sourceRoot":""}