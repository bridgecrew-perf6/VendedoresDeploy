(self["webpackChunkvendedores"]=self["webpackChunkvendedores"]||[]).push([[696],{4048:function(e,t,i){var n=i(2109);n({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},5424:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var n=i(5200),r=i(4367),s=(i(1539),i(7327),i(3325)),a=i(5827),o=i(172),l=i(6952),c=i(7352),u=i(8085),h=i(2936),p=i(6505),d=i(9131),v=i(1824),g=(0,s.Z)(l.Z,d.Z,p.Z,u.Z,(0,c.d)("chipGroup"),(0,h.d)("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default:function(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:function(){return{proxyClass:"v-chip--active"}},computed:{classes:function(){return(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({"v-chip":!0},p.Z.options.computed.classes.call(this)),{},{"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose},this.themeClasses),this.sizeableClasses),this.groupClasses)},hasClose:function(){return Boolean(this.close)},isClickable:function(){return Boolean(p.Z.options.computed.isClickable.call(this)||this.chipGroup)}},created:function(){var e=this,t=[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]];t.forEach((function(t){var i=(0,n.Z)(t,2),r=i[0],s=i[1];e.$attrs.hasOwnProperty(r)&&(0,v.fK)(r,s,e)}))},methods:{click:function(e){this.$emit("click",e),this.chipGroup&&this.toggle()},genFilter:function(){var e=[];return this.isActive&&e.push(this.$createElement(o.Z,{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(a.Zq,e)},genClose:function(){var e=this;return this.$createElement(o.Z,{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.$emit("click:close"),e.$emit("update:active",!1)}}},this.closeIcon)},genContent:function(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render:function(e){var t=[this.genContent()],i=this.generateRouteLink(),n=i.tag,s=i.data;s.attrs=(0,r.Z)((0,r.Z)({},s.attrs),{},{draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:s.attrs.tabindex}),s.directives.push({name:"show",value:this.active}),s=this.setBackgroundColor(this.color,s);var a=this.textColor||this.outlined&&this.color;return e(n,this.setTextColor(a,s),t)}})},549:function(e,t,i){"use strict";function n(e,t,i){var n=t.value,r=t.options||{passive:!0};window.addEventListener("resize",n,r),e._onResize=Object(e._onResize),e._onResize[i.context._uid]={callback:n,options:r},t.modifiers&&t.modifiers.quiet||n()}function r(e,t,i){var n;if(null!=(n=e._onResize)&&n[i.context._uid]){var r=e._onResize[i.context._uid],s=r.callback,a=r.options;window.removeEventListener("resize",s,a),delete e._onResize[i.context._uid]}}var s={inserted:n,unbind:r};t["Z"]=s},9617:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});var n=i(8083),r=i(1824),s=i(144);function a(e){return s.Z.extend({name:"intersectable",data:function(){return{isIntersecting:!1}},mounted:function(){n.Z.inserted(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},destroyed:function(){n.Z.unbind(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},methods:{onObserve:function(t,i,n){if(this.isIntersecting=n,n)for(var s=0,a=e.onVisible.length;s<a;s++){var o=this[e.onVisible[s]];"function"!==typeof o?(0,r.Kd)(e.onVisible[s]+" method is not available on the instance but referenced in intersectable mixin options"):o()}}}})}},6640:function(e,t,i){"use strict";i.d(t,{yo:function(){return l},if:function(){return u}});var n=i(4367),r=i(6198),s=(i(1703),i(5666),i(1618)),a=i(5321),o=i(7376);function l(e){return c.apply(this,arguments)}function c(){return c=(0,r.Z)(regeneratorRuntime.mark((function e(t){var i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("current race user mutation"),i=(0,a.JU)(s.ZP,"/users",""+o.Z.state.common.currentUser.id),e.next=4,(0,a.r7)(i,{raceUser:t});case 4:return n=(0,a.JU)(s.ZP,"/users",""+t),e.next=7,(0,a.QT)(n);case 7:return r=e.sent.data(),r.sellers||(r.sellers={}),r.sellers[o.Z.state.common.currentUser.id]||(r.sellers[o.Z.state.common.currentUser.id]={score:0,proposals:0}),console.log(t," user info will be updated"),console.log({userInfo:r}),e.next=14,(0,a.r7)(n,{raceUser:t,sellers:r.sellers});case 14:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(e,t){return h.apply(this,arguments)}function h(){return h=(0,r.Z)(regeneratorRuntime.mark((function e(t,i){var r,l,c,u,h,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log({selectionIndex:t,pict:i}),r=o.Z.state.common.currentUser.id,l=(0,a.JU)(s.ZP,"/users",""+o.Z.state.common.currentUser.raceUser),c=o.Z.state.seller.currentRace,c[t].pictures||(c[t].pictures={}),c[t].pictLinks||(c[t].pictLinks={}),!c[t].pictLinks[i.original]){e.next=8;break}throw new Error("Alreaady taken");case 8:return u=1,h=c[t].pictures[r],h&&(delete c[t].pictLinks[h.original],u=0),c[t].pictures[r]=i,c[t].pictLinks[i.original]=i,console.log({newRaceInfo:c}),p=o.Z.state.seller.currentRaceUserInfo,p.sellers||(p.sellers={}),p.sellers[o.Z.state.common.currentUser.id]?p.sellers[o.Z.state.common.currentUser.id].proposals+=u:p.sellers[o.Z.state.common.currentUser.id]={proposals:u,score:0},e.next=19,(0,a.r7)(l,(0,n.Z)((0,n.Z)({},p),{},{race:c}));case 19:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}},816:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return O}});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",[e.loading?e._e():i("v-row",{staticClass:"word-bar",attrs:{align:"center",justify:"center"}},[i("v-chip",{staticStyle:{"font-size":"large"},attrs:{color:"primary"}},[e._v(e._s(e.selection?e.selection.word:"...")),this.selection.pictures[this.currentUser.id]&&!this.selection.selected?i("v-icon",[e._v("mdi-check")]):e._e()],1)],1),i("v-container",{staticStyle:{"padding-top":"15px"}},[e.loading||e.loadingctrl||!e.selection?i("loading"):e.selection.selected?i("v-container",[i("v-img",{staticClass:"my-3",attrs:{contain:"",src:e.selection.selected.original,"lazy-src":e.selection.selected.thumbnail,"max-height":"400px","min-height":"400px"}},[i("template",{slot:"placeholder"},[i("img-placeholder")],1)],2),e._v(" "+e._s(e.selection.selected.title)+" "),i("br"),i("div",{staticStyle:{color:"green"}},[e._v(" From seller: "+e._s(e.selection.selected.user)+" ")])],1):e.thumbnailView?i("v-container",[i("v-row",{attrs:{"align-content":"center",justify:"center"}},e._l(e.renderedThumbnails,(function(t,n){return i("v-col",{key:n,staticClass:"pict-card"},[i("tooltip",{attrs:{text:t.title}},[i("v-img",{staticClass:"my-3 thumbnail",attrs:{contain:"",src:t.thumbnail,"lazy-src":t.thumbnail,"max-height":"200px","min-height":"200px","min-width":"270px",transition:"fade"},on:{click:function(){return e.showCarousel(20*(e.page-1)+n)}},scopedSlots:e._u([{key:"placeholder",fn:function(){return[i("img-placeholder")]},proxy:!0}],null,!0)})],1)],1)})),1),i("v-row",{staticClass:"pagination-bar",attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"8"}},[i("v-container",{staticClass:"max-width"},[i("v-pagination",{staticClass:"my-4",attrs:{length:e.totalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1)],1)],1):i("div",{staticClass:"carousel-container"},[i("v-carousel",{attrs:{"hide-delimiters":"","show-arrows-on-hover":"","hide-delimiter-background":""},model:{value:e.carousel,callback:function(t){e.carousel=t},expression:"carousel"}},e._l(e.pictures,(function(t,n){return i("div",{key:n,attrs:{text:t.title}},[i("v-carousel-item",[i("v-sheet",{staticClass:"transparent-sheet",attrs:{height:"100%"}},[i("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[i("v-img",{attrs:{contain:"",src:t.original,height:"95%","lazy-src":t.thumbnail},scopedSlots:e._u([{key:"placeholder",fn:function(){return[i("img-placeholder")]},proxy:!0}],null,!0)})],1)],1)],1)],1)})),0),i("v-row",{staticClass:"actions-row"},[i("v-spacer"),i("tooltip",{attrs:{text:e.selectTooltipText}},[i("v-btn",{staticClass:"action-btn",attrs:{fab:"",small:"",color:"primary",disabled:e.selectDisabled},on:{click:function(){return e.select(e.carousel)}}},[e.selecting?i("v-progress-circular",{attrs:{indeterminate:""}}):i("v-icon",[e._v(" mdi-check ")])],1)],1),i("tooltip",{attrs:{text:"Close preview"}},[i("v-btn",{staticClass:"action-btn",attrs:{fab:"",small:"",color:"primary"},on:{click:function(t){e.thumbnailView=!0}}},[i("v-icon",[e._v(" mdi-close ")])],1)],1)],1)],1)],1)],1)},r=[],s=i(6198),a=i(4367),o=(i(5666),i(7042),i(4048),i(9653),i(1249),i(4553),i(920)),l=i(629),c=i(5418),u=i(6640),h=(i(2222),i(1703),i(1485)),p=i(9669),d=i.n(p),v=h.Z6+"/search.json";function g(e){return f.apply(this,arguments)}function f(){return f=(0,s.Z)(regeneratorRuntime.mark((function e(t){var i,n,r,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=s.length>1&&void 0!==s[1]?s[1]:0,e.next=3,d().get("".concat(v,"?q=").concat(t,"&ijn=").concat(i));case 3:if(n=e.sent,!n.data.error){e.next=6;break}throw new Error(n.data.error);case 6:if(r=n.data.search_information&&"Fully empty"===n.data.search_information.image_results_state,!r){e.next=9;break}return e.abrupt("return",[]);case 9:return e.abrupt("return",n.data.images_results);case 10:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}var m=i(7873),b={components:{Loading:o.Z,Tooltip:c.Z,ImgPlaceholder:m.Z},data:function(){return{selected:-1,thumbnailView:!0,carousel:0,confirmDialog:!1,id:-1,page:1,pictures:[],loadingctrl:!1,selecting:!1}},computed:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,l.rn)("seller",["currentRace"])),(0,l.rn)("common",["currentUser"])),{},{loading:function(){return!Boolean(this.currentRace)},renderedThumbnails:function(){return this.pictures.slice(20*(this.page-1),Math.min(20*this.page,this.pictures.length))},totalPages:function(){return this.pictures.length/20},selection:function(){return this.currentRace[this.id]},selectDisabled:function(){return Boolean(this.selection&&this.selection.pictLinks&&this.pictures&&this.selection.pictLinks[this.pictures[this.carousel].original])},selectTooltipText:function(){return this.selectionDisabled?"Already selected":"Select current image"}}),watch:{loading:{immediate:!0,handler:function(e){if(!e){var t=+this.$router.currentRoute.params.idx-1;console.log({id:t}),(Number.isNaN(t)||t>=this.currentRace.length||t<0)&&(this.$toast.error("No se encuentra la ruta solicitada"),this.$router.push("/404")),this.id=t,this.currentRace[t].selected||this.fetchImages()}}},thumbnailView:function(e){e&&(this.page=Math.floor(this.carousel/20+1))}},methods:{fetchImages:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingctrl=!0,t.prev=1,t.next=4,g(e.selection.word);case 4:e.pictures=t.sent.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{lazy:!1})})),e.loadingctrl=!1,i=e.selection.pictures[e.currentUser.id],i&&(e.carousel=e.pictures.findIndex((function(e){return e.original===i.original})),e.carousel>0&&(e.thumbnailView=!1)),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$toast.error(t.t0.message);case 13:return t.prev=13,t.finish(13);case 15:case"end":return t.stop()}}),t,null,[[1,10,13,15]])})))()},toggleSelected:function(e){this.selected===e?this.selected=null:this.selected=e},showCarousel:function(e){this.thumbnailView=!1,this.carousel=e},select:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.selecting=!0,i.prev=1,i.next=4,(0,u["if"])(t.id,t.pictures[e]);case 4:t.$toast.success("Image successfully selected"),t.$router.push("/seller"),i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](1),t.$toast.error(i.t0.message);case 11:return i.prev=11,t.selecting=!1,i.finish(11);case 14:case"end":return i.stop()}}),i,null,[[1,8,11,14]])})))()}}},Z=b,y=i(1001),x=i(3453),w=i.n(x),k=i(3150),C=i(7426),_=i(4062),$=i(5424),I=i(2102),L=i(9846),R=i(6428),V=i(7047),S=i(8932),B=(i(1539),i(9714),i(172)),z=i(549),U=i(6952),A=i(9617),N=i(8085),P=i(3325),E=(0,P.Z)(U.Z,(0,A.Z)({onVisible:["init"]}),N.Z).extend({name:"v-pagination",directives:{Resize:z.Z},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(e){return e%1===0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return(0,a.Z)({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var e=parseInt(this.totalVisible,10);if(0===e)return[];var t=Math.min(Math.max(0,e)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=t)return this.range(1,this.length);var i=t%2===0?1:0,n=Math.floor(t/2),r=this.length-n+1+i;if(this.value>n&&this.value<r){var s=1,a=this.length,o=this.value-n+2,l=this.value+n-2-i,c=o-1===s+1?2:"...",u=l+1===a-1?l+1:"...";return[1,c].concat((0,S.Z)(this.range(o,l)),[u,this.length])}if(this.value===n){var h=this.value+n-1-i;return[].concat((0,S.Z)(this.range(1,h)),["...",this.length])}if(this.value===r){var p=this.value-n+1;return[1,"..."].concat((0,S.Z)(this.range(p,this.length)))}return[].concat((0,S.Z)(this.range(1,n)),["..."],(0,S.Z)(this.range(r,this.length)))}},watch:{value:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.selected=null,this.$nextTick(this.onResize),setTimeout((function(){return e.selected=e.value}),100)},onResize:function(){var e=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((e-96)/42)},next:function(e){e.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(e){e.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(e,t){var i=[];e=e>0?e:1;for(var n=e;n<=t;n++)i.push(n);return i},genIcon:function(e,t,i,n,r){return e("li",[e("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":i},attrs:{disabled:i,type:"button","aria-label":r},on:i?{}:{click:n}},[e(B.Z,[t])])])},genItem:function(e,t){var i=this,n=t===this.value&&(this.color||"primary"),r=t===this.value,s=r?this.currentPageAriaLabel:this.pageAriaLabel;return e("button",this.setBackgroundColor(n,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":t===this.value},attrs:{type:"button","aria-current":r,"aria-label":this.$vuetify.lang.t(s,t)},on:{click:function(){return i.$emit("input",t)}}}),[t.toString()])},genItems:function(e){var t=this;return this.items.map((function(i,n){return e("li",{key:n},[isNaN(Number(i))?e("span",{class:"v-pagination__more"},[i.toString()]):t.genItem(e,i)])}))},genList:function(e,t){return e("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},t)}},render:function(e){var t=[this.genIcon(e,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(e),this.genIcon(e,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return e("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(e,t)])}}),T=i(624),j=i(2877),D=i(3385),M=i(9762),G=(0,y.Z)(Z,n,r,!1,null,null,null),O=G.exports;w()(G,{VBtn:k.Z,VCarousel:C.Z,VCarouselItem:_.Z,VChip:$.Z,VCol:I.Z,VContainer:L.Z,VIcon:R.Z,VImg:V.Z,VPagination:E,VProgressCircular:T.Z,VRow:j.Z,VSheet:D.Z,VSpacer:M.Z})}}]);
//# sourceMappingURL=696-legacy.bf2c31ac.js.map